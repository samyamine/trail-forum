generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Comment {
  id         String                @id @default(cuid())
  answers    Answer[]
  authorId   String
  author     User                  @relation(fields: [authorId], references: [id])
  body       String
  createdAt  DateTime              @default(now())
  downVoters UserCommentDownVote[]
  savers     UserCommentSave[]
  topicId    String
  topic      Topic                 @relation(fields: [topicId], references: [id])
  updatedAt  DateTime              @updatedAt
  upVoters   UserCommentUpVote[]
}

model Answer {
  id         String               @id @default(cuid())
  parentId   String
  parent     Comment              @relation(fields: [parentId], references: [id])
  authorId   String
  author     User                 @relation(fields: [authorId], references: [id])
  body       String
  createdAt  DateTime             @default(now())
  updatedAt  DateTime             @updatedAt
  downVoters UserAnswerDownVote[]
  savers     UserAnswerSave[]
  upVoters   UserAnswerUpVote[]
}

model Topic {
  id         String              @id
  authorId   String
  author     User                @relation(fields: [authorId], references: [id])
  body       String
  category   String
  country    String
  createdAt  DateTime            @default(now())
  title      String
  updatedAt  DateTime            @updatedAt
  comments   Comment[]
  downVoters UserTopicDownVote[]
  savers     UserTopicSave[]
  upVoters   UserTopicUpVote[]
}

model User {
  id                String                @id
  country           String
  createdAt         DateTime              @default(now())
  updatedAt         DateTime              @updatedAt
  username          String
  comments          Comment[]
  followers         Follows[]             @relation("Followers")
  following         Follows[]             @relation("Following")
  topics            Topic[]
  downVotedAnswers  UserAnswerDownVote[]
  downVotedComments UserCommentDownVote[]
  savedComments     UserCommentSave[]
  upVotedAnswers    UserAnswerUpVote[]
  upVotedComments   UserCommentUpVote[]
  downVotedTopics   UserTopicDownVote[]
  savedTopics       UserTopicSave[]
  savedAnswers      UserAnswerSave[]
  upVotedTopics     UserTopicUpVote[]
  answers           Answer[]
}

model UserAnswerDownVote {
  userId   String
  user     User   @relation(fields: [userId], references: [id])
  answerId String
  answer   Answer @relation(fields: [answerId], references: [id])

  @@id([userId, answerId])
}

model UserAnswerSave {
  userId   String
  user     User   @relation(fields: [userId], references: [id])
  answerId String
  answer   Answer @relation(fields: [answerId], references: [id])

  @@id([userId, answerId])
}

model UserAnswerUpVote {
  userId   String
  user     User   @relation(fields: [userId], references: [id])
  answerId String
  answer   Answer @relation(fields: [answerId], references: [id])

  @@id([userId, answerId])
}

model Follows {
  followerId  String
  follower    User   @relation("Followers", fields: [followerId], references: [id])
  followingId String
  following   User   @relation("Following", fields: [followingId], references: [id])

  @@id([followerId, followingId])
}

model UserCommentDownVote {
  userId    String
  commentId String
  comment   Comment @relation(fields: [commentId], references: [id])
  user      User    @relation(fields: [userId], references: [id])

  @@id([userId, commentId])
}

model UserCommentSave {
  userId    String
  commentId String
  comment   Comment @relation(fields: [commentId], references: [id])
  user      User    @relation(fields: [userId], references: [id])

  @@id([userId, commentId])
}

model UserCommentUpVote {
  userId    String
  commentId String
  comment   Comment @relation(fields: [commentId], references: [id])
  user      User    @relation(fields: [userId], references: [id])

  @@id([userId, commentId])
}

model UserTopicDownVote {
  userId  String
  topicId String
  topic   Topic  @relation(fields: [topicId], references: [id])
  user    User   @relation(fields: [userId], references: [id])

  @@id([userId, topicId])
}

model UserTopicSave {
  userId  String
  topicId String
  topic   Topic  @relation(fields: [topicId], references: [id])
  user    User   @relation(fields: [userId], references: [id])

  @@id([userId, topicId])
}

model UserTopicUpVote {
  userId  String
  topicId String
  topic   Topic  @relation(fields: [topicId], references: [id])
  user    User   @relation(fields: [userId], references: [id])

  @@id([userId, topicId])
}
